post:
  title: >-
    Subversion to TFS 2010: The migration engine is unable to resolve a conflict
    where two changes have the same target item
  link: >-
    https://nkdagility.com/blog/subversion-to-tfs-2010-the-migration-engine-is-unable-to-resolve-a-conflict-where-two-changes-have-the-same-target-item/
  pubDate: Fri, 26 Aug 2011 18:18:04 +0000
  creator: MrHinsh
  guid:
    _: >-
      http://blog.hinshelwood.com/subversion-to-tfs-2010-the-migration-engine-is-unable-to-resolve-a-conflict-where-two-changes-have-the-same-target-item/
    $:
      isPermaLink: 'false'
  description: ''
  encoded:
  - "<a href=\"http://blog.hinshelwood.com/files/2011/08/subversion1.png\"><img style=\"background-image: none; margin: 0px 10px 10px 0px; padding-left: 0px; padding-right: 0px; display: inline; float: left; padding-top: 0px; border-width: 0px;\" title=\"subversion\" src=\"http://blog.hinshelwood.com/files/2011/08/subversion_thumb.png\" alt=\"subversion\" width=\"48\" height=\"48\" align=\"left\" border=\"0\" /></a>\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image4.png\"><img style=\"background-image: none; margin: 0px 10px 10px 0px; padding-left: 0px; padding-right: 0px; display: inline; float: left; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb.png\" alt=\"image\" width=\"320\" height=\"48\" align=\"left\" border=\"0\" /></a>Running into problems when migrating a Subversion Repository to Team Foundation Server is what to so with conflicts resulting from SVN being Case Sensitive and TFS not.\n\nnote: Case Sensitivity is mostly a bad idea for files, url’s and code. <br clear=\"all\" />\n\n<hr />\n\nOn of the problems with Subversion is that it treats “/trunk/a.txt” and “/trunk/A.txt” as two different files. This can cause conflicts during the migration that need to be resolved.\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image5.png\"><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb1.png\" alt=\"image\" width=\"604\" height=\"302\" border=\"0\" /></a>\n<strong>Figure: The migration runs smoothly for a while.</strong>\n\nFor the smaller sets that I migrated to test this tool it worked just fine, but the larger the data set, the more likely you are to encounter errors. The first set was 1700+ changes, but this one is 24000+ which mean that it is more than 10 times more likely to encounter a conflict.\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image6.png\"><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb2.png\" alt=\"image\" width=\"604\" height=\"299\" border=\"0\" /></a>\n<strong>Figure: Unable to resolve conflict where two changes have the same target item</strong>\n\n&nbsp;\n\nDam, but conflicts suck. This particular conflict is due to two changes from Subversion are being applied to the same file in a single changes. We need to be able to resolve this as you will not be able to make changes to what is migrated and then rerun that portion.\n<pre class=\"brush: plain; ruler: true;\">LogicalOperationStack=Migrate, Main\nDateTime=2011-08-26T16:21:57.8098771Z\n[8, 4532, 8/26/2011 9:21:57 AM, Migrate] Stopping (overall: 00:00:01.1687929)\nMigrationConsole.exe Warning: 0 : The migration engine is unable to resolve a conflict where two changes have the same target item:\nLogicalOperationStack=Main\nDateTime=2011-08-26T16:21:57.8108537Z\nMigrationConsole.exe Information: 0 : Microsoft.TeamFoundation.Migration.Toolkit.UnresolvableConflictException: The migration engine is unable to resolve a conflict where two changes have the same target item:\n   at Microsoft.TeamFoundation.Migration.Toolkit.ChangeOptimizer.detectConflicts()\n   at Microsoft.TeamFoundation.Migration.Toolkit.ChangeOptimizer.Resolve()\n   at Microsoft.TeamFoundation.Migration.Toolkit.BatchingContext.Flush()\n   at Microsoft.TeamFoundation.Migration.Toolkit.VC.SourceToTfsMigrationEngine.Flush(BatchingContext context)\n   at rlEDq7v0Ex0lXcB8eF.3RBgRNXCby0G0kR3Z1.Flush(BatchingContext context)\n   at Microsoft.TeamFoundation.Migration.Toolkit.VC.SourceToTfsMigrationEngine.ProcessChangeGroup(ChangeGrouping group)\n   at rlEDq7v0Ex0lXcB8eF.3RBgRNXCby0G0kR3Z1.ProcessChangeGroup(ChangeGrouping )\n   at kKnILa3qW3UW4h2H4L.f8pB0cQoQnxV42wuir.ProcessChangeGroup(ChangeGrouping )\n   at Microsoft.TeamFoundation.Migration.Toolkit.VC.VCMigrationEngine.MigrateEach()\n   at Microsoft.TeamFoundation.Migration.Toolkit.VC.VCMigrationEngine.Run()\n   at Microsoft.TeamFoundation.Migration.Toolkit.VC.SourceToTfsMigrationEngine.Run()\n   at rlEDq7v0Ex0lXcB8eF.3RBgRNXCby0G0kR3Z1.Run()\n   at OjkZA5fW18B01Gf9op.bKFnHGSRxN5AAInIof.vonZTPjT0()\nLogicalOperationStack=Main\nDateTime=2011-08-26T16:21:57.8118303Z\nMigrationConsole.exe Information: 0 : Svn2TFS_cgx: The migration engine is unable to resolve a conflict where two changes have the same target item:\nLogicalOperationStack=Main\nDateTime=2011-08-26T16:21:57.8118303Z\nMigrationConsole.exe Warning: 0 : Thread was being aborted.\nLogicalOperationStack=Main\nDateTime=2011-08-26T16:21:57.8235495Z\nMigrationConsole.exe Information: 0 : System.Threading.ThreadAbortException: Thread was being aborted.\n   at System.Threading.Thread.AbortInternal()\n   at System.Threading.Thread.Abort()\n   at OjkZA5fW18B01Gf9op.bKFnHGSRxN5AAInIof.eY3TcUpOH(Thread )\nLogicalOperationStack=Main\nDateTime=2011-08-26T16:21:57.8264793Z</pre>\n<strong>Figure: Well, this is going to be fun</strong>\n\nLuckily Timely Migration have a little Support tools to help us. Fire up “Migration Support”, which is in the install folder, and have a bunch of tools to make things easier.\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image7.png\"><strong><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb3.png\" alt=\"image\" width=\"604\" height=\"432\" border=\"0\" /></strong></a>\n\n<strong>Figure: Which support tool would you like to use</strong>\n\nMost migration tools forget about this bit and I have only really seen it in Timely and in the Integration Platform. What I need to be able to do is open the Session Analysis and make a couple of changes to fix the issue. Luckily there is a “Session Viewer” which will open the TfsTimelyMigration database that you created as part of your configuration.\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image8.png\"><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb4.png\" alt=\"image\" width=\"604\" height=\"432\" border=\"0\" /></a>\n\n<strong>Figure: There are a bunch of features to edit the “Session” data</strong>\n\nThe first thing we need to do is find out where we are. Clicking the “Get Pending Change Group” will load up that pesky 17018 item that is causing the block.\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image9.png\"><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb5.png\" alt=\"image\" width=\"604\" height=\"382\" border=\"0\" /></a>\n\n<strong>Figure: You can edit the change group to bypass the problem</strong>\n\nIt is now a case of figuring out what the problem actually is. There are no “Rename”’s so it is not a case of a Rename causing a conflict, but what is the problem…\n\nI could not figure it out from just scrolling through this list so I though to use the “Save Actions As”, but the output from that provided to be NASTY. Real nasty:\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image10.png\"><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb6.png\" alt=\"image\" width=\"604\" height=\"296\" border=\"0\" /></a>\n\n<strong>Figure: What the heck use is this!</strong>\n\nSo what I decided to do was install the Snagit 10 trial and use the “Capture Text” function.\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image11.png\"><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb7.png\" alt=\"image\" width=\"604\" height=\"334\" border=\"0\" /></a>\n\n<strong>Figure: Snagit Capture text function gives you grab the entire vertical area in one go</strong>\n\n&nbsp;\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image12.png\"><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb8.png\" alt=\"image\" width=\"604\" height=\"284\" border=\"0\" /></a>\n\n<strong>Figure: Now I have it as a kind of notepad format</strong>\n\nTaking this output, pasting it into Excel, creating the data as a table and ordering by “TFS Source” produces an interesting result.\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image13.png\"><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb9.png\" alt=\"image\" width=\"604\" height=\"256\" border=\"0\" /></a>\n\n<strong>Figure: You can see the dups</strong>\n\nWhere you might ask, did these come from. Well, in the settings file there was an option for “ItemExistshandler” that for most cases can be set to “ChangeTpEdit”, the only problem is if the file is already an “Add” then you are going to get a conflict like this one.\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image14.png\"><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb10.png\" alt=\"image\" width=\"604\" height=\"329\" border=\"0\" /></a>\n\n<strong>Figure: Item Exists Handler default to Change to Edit</strong>\n\nWhile this is indeed desired behaviour, it can case this sort of issue when there are files that have slightly different casing when they are added.\n<ul>\n\t<li><strong>Change the option to “Ignore”\n\n</strong></li>\n</ul>\nWhile this would remove the conflicts, it would poise the real risk of loosing data.\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image15.png\"><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb11.png\" alt=\"image\" width=\"564\" height=\"97\" border=\"0\" /></a>\n\n<strong><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"o_Error-icon\" src=\"http://blog.hinshelwood.com/files/2011/08/o_Error-icon.png\" alt=\"o_Error-icon\" width=\"16\" height=\"16\" border=\"0\" />Figure: Risky option, change setting to ignore Existing Items</strong>\n\n&nbsp;\n<ul>\n\t<li><strong></strong><strong>Remove each conflict (<span style=\"color: #ff0000;\">Recommended</span>)</strong>&nbsp;</li>\n</ul>\n&nbsp;\n\nFor each item in the list, determine which one is in conflict and remove it manually. This is likely to happen ever time a large number of changes is checked in or reorgs of code happen.\n\n<a href=\"http://blog.hinshelwood.com/files/2011/08/image16.png\"><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"image\" src=\"http://blog.hinshelwood.com/files/2011/08/image_thumb12.png\" alt=\"image\" width=\"564\" height=\"244\" border=\"0\" /></a>\n\n<strong><img style=\"background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;\" title=\"o_Tick-icon\" src=\"http://blog.hinshelwood.com/files/2011/08/o_Tick-icon.png\" alt=\"o_Tick-icon\" width=\"16\" height=\"16\" border=\"0\" />Figure: Safe option, remove each bad change</strong>\n\nIt would be really nice if Timely could add the ability to view the conflicts only and be able to bulk apply the resolution as I am looking at 300+ conflicts in a single check-in. At least we are 68% of the way through this particular migration and the chances are (fingers crossed) that there will only be a few conflicts.\n\n<strong>Let me know how you get on with your own migrations!</strong>"
  - ''
  post_id: '3769'
  post_date: '2011-08-26 11:18:04'
  post_date_gmt: '2011-08-26 18:18:04'
  post_modified: '2011-08-26 11:18:04'
  post_modified_gmt: '2011-08-26 18:18:04'
  comment_status: open
  ping_status: open
  post_name: >-
    subversion-to-tfs-2010-the-migration-engine-is-unable-to-resolve-a-conflict-where-two-changes-have-the-same-target-item
  status: publish
  post_parent: '0'
  menu_order: '0'
  post_type: post
  post_password: ''
  is_sticky: '0'
  category: {}
  postmeta:
  - meta_key: authorsure_include_css
    meta_value: ''
  - meta_key: dsq_thread_id
    meta_value: '396775876'
  - meta_key: _flattr_post_language
    meta_value: ''
  - meta_key: _flattr_post_category
    meta_value: ''
  - meta_key: _flattr_post_hidden
    meta_value: ''
  - meta_key: _flattr_btn_disabled
    meta_value: ''
  - meta_key: _edit_last
    meta_value: '3'
  - meta_key: robotsmeta
    meta_value: index,follow
  - meta_key: _thumbnail_id
    meta_value: '8622'
  - meta_key: _wpbitly
    meta_value: http://nkdalm.net/1aBIhX5
  - meta_key: _jetpack_related_posts_cache
    meta_value: >-
      a:1:{s:32:"8f6677c9d6b0f903e98ad32ec61f8deb";a:2:{s:7:"expires";i:1470956542;s:7:"payload";a:3:{i:0;a:1:{s:2:"id";i:7402;}i:1;a:1:{s:2:"id";i:3736;}i:2;a:1:{s:2:"id";i:22;}}}}
  - meta_key: _wpghs_github_path
    meta_value: >-
      _posts/2011-08-26-subversion-to-tfs-2010-the-migration-engine-is-unable-to-resolve-a-conflict-where-two-changes-have-the-same-target-item.md
  - meta_key: _sha
    meta_value: ''
  - meta_key: _wpml_media_has_media
    meta_value: '1'
  - meta_key: _tribe_ticket_capacity
    meta_value: '0'
  - meta_key: _tribe_ticket_version
    meta_value: 4.12.1.2
  - meta_key: ekit_post_views_count
    meta_value: '376'
