post:
  title: Upgrading Team Foundation Server 2008 to 2010
  link: https://nkdagility.com/blog/upgrading-team-foundation-server-2008-to-2010/
  pubDate: Mon, 03 May 2010 13:04:01 +0000
  creator: MrHinsh
  guid:
    _: >-
      http://geekswithblogs.net/hinshelm/archive/2010/05/03/upgrading-team-foundation-server-2008-to-2010.aspx
    $:
      isPermaLink: 'false'
  description: ''
  encoded:
  - "<p><img border=\"0\" alt=\"vs2010alm\" align=\"left\" width=\"88\" height=\"68\" style=\"border-right-width: 0px;margin: 0px 20px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-vs2010alm_3bbad1c9-c1cd-4ae4-87bc-68c49d3c0d80.png\" />I am sure you will have seen my <a href=\"http://blog.hinshelwood.com/archive/2010/04/12/_upgrading-from-tfs-2010-rc-to-tfs-2010-rtm-done.aspx\">posts on upgrading</a> our internal Team Foundation Server from TFS2008 to TFS2010 Beta 2, RC and RTM, but what about a fresh upgrade of TFS2008 to TFS2010 using the RTM version of TFS. One of our clients is taking the plunge with TFS2010, so I have the job of doing the upgrade.</p>\n<p><br />\n\_</p>\n<p><font color=\"#ff0000\">Update 4th May 2010</font></p>\n<ul>\n    <li><a href=\"http://johnliu.net/\">John Liu</a> – John can’t find his history after the Upgrade. This is not a feature of the upgrade and indeed all of the history is in tact on the original project. The problem is that you can’t actually change the process template that a project uses. Oh, you can make a really good stab at making it look like it has been upgraded, but under the covers there will be differences from a native project. So the plan is to migrate by creating a new project on the Agile5 template that has a branch of code from the old Conchnago project. This keeps the history in tact, if not in one place. If you look in the history and what you are looking for is before the upgrade data (same as the date of the branch) you need to follow the branch back to the old project and check there. I bet in 6 months you never need to look…</li>\n    <li><a href=\"http://translate.google.com/translate?js=y&amp;prev=_t&amp;hl=en&amp;ie=UTF-8&amp;layout=1&amp;eotf=1&amp;u=http%3A%2F%2Fzlgcool.cnblogs.com%2F&amp;sl=zh-CN&amp;tl=en\">Allan Zhou</a> – I am going to cover the project upgrade process in a future post, but suffice to say you can not remove a template once it has been used. That data will be floating around in the warehouse and cube forever. You can do a certain amount of clean up, but that would require you to “destroy” all of the work item types and projects that use an old template and you would loose history.</li>\n    <li><a href=\"http://www.geekswithblogs.net/wildturtle\">Sam Abraham</a> – You can indeed connect just fine from Visual Studio 2010 to a Team Foundation Server 2008.</li>\n</ul>\n<hr />\n<p>It is sometimes very useful to have a team member that starts work when most of the Sydney workers are heading home as I can do the upgrade without impacting them. The down side is that if you have any blockers then you can be pretty sure that everyone that can deal with your problem is asleep <img class=\"wlEmoticon wlEmoticon-sad\" alt=\"Sad\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-wlEmoticon-sad_2.png\" /></p>\n<p>I am starting with an existing blank installation of TFS 2010, but Adam Cogan let slip that he was the one that did the install so I thought it prudent to make sure that it was OK.</p>\n<h3>Verifying Team Foundation Server 2010</h3>\n<p>We need to check that TFS 2010 has been installed correctly. First, check the Admin console and have a root about for any errors.</p>\n<p><img border=\"0\" alt=\"image\" width=\"800\" height=\"451\" style=\"border-right-width: 0px;margin: 0px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-image_9d0c152b-9c52-438f-a38b-28271c91af35.png\" /> <br />\n<strong>Figure: Even the SQL Setup looks good. I don’t know how Adam did it!</strong></p>\n<h3>Backing up the Team Foundation Server 2008 Databases</h3>\n<p>As we are moving from one server to another (<a target=\"_blank\" href=\"http://sharepoint.ssw.com.au/Standards/TFS/RulesToBetterTFS2010Migration\">recommended method</a>) we will be taking a backup of our TFS2008 databases and resorting them to the SQL Server for the new TFS2010 Server. Do not just detach and reattach. This will cause problems with the version of the database. If you are running a test migration you just need to create a backup of the TFS 2008 databases, but if you are doing the live migration then you should stop IIS on the TFS 2008 server before you backup the databases. This will stop any inadvertent check-ins or changes to TFS 2008.</p>\n<p><img border=\"0\" alt=\"image\" width=\"659\" height=\"463\" style=\"border-right-width: 0px;margin: 0px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-image_15659b67-37a3-4072-ad65-0cae32de8adc.png\" /></p>\n<p><strong>Figure: Stop IIS before you take a backup to prevent any TFS 2008 changes being written to the database.</strong></p>\n<p>It is good to leave a little time between taking the TFS 2008 server offline and commencing the upgrade as there is always one developer who has not finished and starts screaming. This time it was <a target=\"_blank\" href=\"http://sharepoint.ssw.com.au/AboutUs/Employees/Pages/John.aspx\">John Liu</a> that needed 10 more minutes to make his changes and check-in, so I always give it 30 minutes and see if anyone screams.</p>\n<blockquote>\n<p>John Liu [SSW] said: <br />\n\_ are you doing something to TFS :-O <br />\nMrHinsh [SSW UK][VS ALM MVP] said: <br />\n\_ I have stopped TFS 2008 as per my emails <br />\nJohn Liu [SSW] said: <br />\n\_ haven't finish check in @_@ <br />\n\_ can we have it for 10mins? :) <br />\nMrHinsh [SSW UK][VS ALM MVP] said: <br />\n\_ TFS 2008 has been started <br />\nJohn Liu [SSW] said: <br />\n\_ I love you!</p>\n<p>-IM conversation at TFS Upgrade +25 minutes</p>\n</blockquote>\n<p>After John confirmed that he had everything done I turned IIS off again and made a cup of tea. There were no more screams so the upgrade can continue. <br />\n\_</p>\n<p><img border=\"0\" alt=\"image\" width=\"626\" height=\"657\" style=\"border-right-width: 0px;margin: 0px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-image_31c4d257-6c8f-4a30-bcaa-44beca450eea.png\" /> <br />\n<strong>Figure: Backup all of the databases for TFS and include the Reporting Services, just in case.</strong></p>\n<p>\_</p>\n<p><img border=\"0\" alt=\"image\" width=\"763\" height=\"388\" style=\"border-right-width: 0px;margin: 0px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-image_1653df68-b9a6-4700-a311-4fa6a3f6a6e2.png\" /> <br />\n<strong>Figure: Check that all the backups have been taken</strong></p>\n<p>Once you have your backups, you need to copy them to your new TFS2010 server and restore them. This is a good way to proceed as if we have any problems, or just plain run out of time, then you just turn the TFS 2008 server back on and all you have lost is one upgrade day, and not 10 developer days.</p>\n<p>As per the rules, you should <a target=\"_blank\" href=\"http://sharepoint.ssw.com.au/Standards/TFS/RulesToBetterTFS2010Migration/Pages/DogfoodStatsBefore.aspx\">record the number of files and the total number of areas and iterations</a> before the upgrade so you have something to compare to:</p>\n<blockquote>\n<p>TFS2008</p>\n<p>File count:</p>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"2\" width=\"400\">\n    <tbody>\n        <tr>\n            <td valign=\"top\" width=\"200\"><strong>Type</strong></td>\n            <td valign=\"top\" width=\"200\"><strong>Count</strong></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"200\">1</td>\n            <td valign=\"top\" width=\"200\">1845</td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"200\">2</td>\n            <td valign=\"top\" width=\"200\">15770</td>\n        </tr>\n    </tbody>\n</table>\n<p>Areas &amp; Iterations:</p>\n<p>139</p>\n</blockquote>\n<p>You can use this to verify that the upgrade was successful. it should however be noted that the numbers in TFS 2010 will be bigger. This is due to some of the sorting out that TFS does during the upgrade process.</p>\n<h3>Restore Team Foundation Server 2008 Databases</h3>\n<p>Restoring the databases is much more time consuming than just attaching them as you need to do them one at a time. But you may be taking a backup of an operational database and need to restore all your databases to a particular point in time instead of to the latest. I am doing latest unless I encounter any problems.</p>\n<p><img border=\"0\" alt=\"image\" width=\"704\" height=\"632\" style=\"border-right-width: 0px;margin: 0px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-image_20322f1b-b22b-4a11-b679-2aa3816645b3.png\" /> <br />\n<strong>Figure: Restore each of the databases to either a latest or specific point in time.</strong></p>\n<p>\_</p>\n<p>\_<img border=\"0\" alt=\"image\" width=\"286\" height=\"464\" style=\"border-right-width: 0px;margin: 0px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-image_781d49f5-84d8-4b5d-9900-682433c6ce59.png\" /> <br />\n<strong>Figure: Restore all of the required databases</strong></p>\n<p>Now that all of your databases are restored you now need to upgrade them to Team Foundation Server 2010.</p>\n<h3>Upgrade Team Foundation Server 2008 Databases</h3>\n<p>This is probably the easiest part of the process. You need to call a fire and forget command that will go off to the database specified, find the TFS 2008 databases and upgrade them to 2010. During this process all of the 6 main TFS 2008 databases are merged into the TfsVersionControl database, upgraded and then the database is renamed to TFS_[CollectionName]. The rename is only the database and not the physical files, so it is worth going back and renaming the physical file as well. This keeps everything neat and tidy.</p>\n<p>If you plan to keep the old TFS 2008 server around, for example if you are doing a test migration first, then you will need to change the TFS GUID. This GUID is unique to each TFS instance and is preserved when you upgrade. This GUID is used by the clients and they can get a little confused if there are two servers with the same one.</p>\n<p>To kick of the upgrade you need to open a command prompt and change the path to “C:Program FilesMicrosoft Team Foundation Server 2010Tools” and run the “import” command in\_ “tfsconfig”.</p>\n<blockquote>\n<p>TfsConfig import /sqlinstance:&lt;Previous TFS Data Tier&gt; <br />\n\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ /collectionName:&lt;Collection Name&gt; <br />\n\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ /confirmed</p>\n<p>Imports a TFS 2005 or 2008 data tier as a new project collection.</p>\n<p>Important: This command should only be executed after adequate backups have been performed.</p>\n<p>After you import, you will need to configure portal and reporting settings via the administration console.</p>\n<p>EXAMPLES <br />\n-------- <br />\nTfsConfig import /sqlinstance:tfs2008sql /collectionName:imported /confirmed <br />\nTfsConfig import /sqlinstance:tfs2008sqlInstance /collectionName:imported /confirmed</p>\n<p>OPTIONS: <br />\n-------- <br />\nsqlinstance\_\_\_\_\_\_\_\_ The sql instance of the TFS 2005 or 2008 data tier. The TFS databases at that location will be modified directly and will no longer be usable as previous version databases.\_ Ensure you have back-ups.</p>\n<p>collectionName\_\_\_\_\_ The name of the new Team Project Collection.</p>\n<p>confirmed\_\_\_\_\_\_\_\_\_\_ Confirm that you have backed-up databases before importing.</p>\n</blockquote>\n<p>This command will automatically look for the TfsIntegration database and verify that all the other required databases exist.</p>\n<p>In this case it took around 5 minutes to complete the upgrade as the total database size was under 700MB. This was unlike the upgrade of SSW’s production database with over 17GB of data which took a few hours. At the end of the process you should get no errors and no warnings.</p>\n<blockquote>\n<p>The Upgrade operation on the ApplicationTier feature has completed. There were 0 errors and 0 warnings.</p>\n</blockquote>\n<p>As this is a new server and not a pure upgrade there should not be a problem with the GUID.</p>\n<p>If you think at any point you will be doing this more than once, for example doing a test migration, or merging many TFS 2008 instances into a single one, then you should go back and rename the physical TfsVersionControl.mdf file to the same as the new collection. This will avoid confusion later down the line.</p>\n<p>To do this, detach the new collection from the server and rename the physical files. Then reattach and change the physical file locations to match the new name.</p>\n<p>You can follow <a title=\"http://www.mssqltips.com/tip.asp?tip=1122\" rel=\"nofollow\" href=\"http://www.mssqltips.com/tip.asp?tip=1122\">http://www.mssqltips.com/tip.asp?tip=1122</a> for a more detailed explanation of how to do this.</p>\n<p><img border=\"0\" alt=\"image\" width=\"800\" height=\"532\" style=\"border-right-width: 0px;margin: 0px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-image_1e9bfbc3-b5b9-4ec3-983c-45fa3e632c04.png\" /> <br />\n<strong>Figure: Stop the collection so TFS does not take a wobbly when we detach the database.</strong></p>\n<p>When you try to start the new collection again you will get a conflict with project names and will require to remove the Test Upgrade collection. This is fine and it just needs detached.</p>\n<p><img border=\"0\" alt=\"image\" width=\"799\" height=\"601\" style=\"border-right-width: 0px;margin: 0px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-image_3522cb38-5979-45af-a989-92234cdb5693.png\" /> <br />\n<strong>Figure: Detaching the test upgrade from the new Team Foundation Server 2010 so we can start the new Collection again.</strong></p>\n<p>You will now be able to start the new upgraded collection and you are ready for testing.</p>\n<p>Do you remember the stats we took off the TFS 2008 server?</p>\n<blockquote>\n<p>TFS2008</p>\n<p>File count:</p>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"2\" width=\"400\">\n    <tbody>\n        <tr>\n            <td valign=\"top\" width=\"200\"><strong>Type</strong></td>\n            <td valign=\"top\" width=\"200\"><strong>Count</strong></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"200\">1</td>\n            <td valign=\"top\" width=\"200\">1845</td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"200\">2</td>\n            <td valign=\"top\" width=\"200\">15770</td>\n        </tr>\n    </tbody>\n</table>\n<p>Areas &amp; Iterations:</p>\n<p>139</p>\n</blockquote>\n<p>Well, now we need to <a target=\"_blank\" href=\"http://sharepoint.ssw.com.au/Standards/TFS/RulesToBetterTFS2010Migration/Pages/RunDogFoodStatsAfter.aspx\">compare them to the TFS 2010 stats</a>, remembering that there will probably be more files under source control.</p>\n<blockquote>\n<p>TFS2010</p>\n<p>File count:</p>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"2\" width=\"400\">\n    <tbody>\n        <tr>\n            <td valign=\"top\" width=\"200\"><strong>Type</strong></td>\n            <td valign=\"top\" width=\"200\"><strong>Count</strong></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"200\">1</td>\n            <td valign=\"top\" width=\"200\">19288</td>\n        </tr>\n    </tbody>\n</table>\n<p>Areas &amp; Iterations:</p>\n<p>139</p>\n</blockquote>\n<p>Lovely, the number of iterations are the same, and the number of files is bigger. Just what we were looking for.</p>\n<h3>Testing the upgraded Team Foundation Server 2010 Project Collection</h3>\n<p>Can we connect to the new collection and project?</p>\n<p><img border=\"0\" alt=\"image\" width=\"800\" height=\"564\" style=\"border-right-width: 0px;margin: 0px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-image_504c5b1f-c35c-4ce5-ae84-30cba3e1fe51.png\" /> <br />\n<strong>Figure: We can connect to the new collection and project.</strong></p>\n<p>\_</p>\n<p><img border=\"0\" alt=\"image\" width=\"800\" height=\"565\" style=\"border-right-width: 0px;margin: 0px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-image_188bcf8e-d690-4e11-a613-ac7e8047784d.png\" /> <br />\n<strong>Figure: make sure you can connect to The upgraded projects and that you can see all of the files.</strong></p>\n<p><br />\n<img border=\"0\" alt=\"image\" width=\"800\" height=\"509\" style=\"border-right-width: 0px;margin: 0px 20px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px\" src=\"http://blog.hinshelwood.com/files/2011/05/GWB-WindowsLiveWriter-UpgradingtoTeamFoundationServer2010_C1D3-image_7b208a20-3d04-4f8e-a62a-b5c36565d08b.png\" /> <br />\n<strong>Figure: Team Web Access is there and working. </strong></p>\n<p>Note that for Team Web Access you now use the same port and URL as for TFS 2010. So in this case as I am running on the local box you need to use <a href=\"http://localhost:8080/tfs\">http://localhost:8080/tfs</a> which will redirect you to <a href=\"http://localhost:8080/tfs/web\">http://localhost:8080/tfs/web</a> for the web access.</p>\n<p>If you need to connect with a Visual Studio 2008 client you will need to use the full path of the new collection, <a>http://[servername]/tfs/[collectionname</a>] and this will work with all of your collections.</p>\n<p>With Visual Studio 2005 you will only be able to connect to the Default collection and in both VS2008 and VS2005 you will need to install the forward compatibility updates.</p>\n<ul>\n    <li><a href=\"http://www.microsoft.com/downloads/details.aspx?FamilyID=22215e4c-af6f-4e2f-96df-20e94d762689&amp;displaylang=en\">Visual Studio Team System 2005 Service Pack 1 Forward Compatibility Update for Team Foundation Server 2010</a></li>\n    <li><a href=\"http://www.microsoft.com/downloads/details.aspx?familyid=CF13EA45-D17B-4EDC-8E6C-6C5B208EC54D&amp;displaylang=en\">Visual Studio Team System 2008 Service Pack 1 Forward Compatibility Update for Team Foundation Server 2010</a>\n    <p>To make sure that you have everything up to date, make sure that you run <a target=\"_blank\" href=\"http://www.ssw.com.au/ssw/Diagnostics\">SSW Diagnostics</a> and get all green ticks.</p>\n    <p><strong>Upgrade Done!</strong></p>\n    <p>At this point you can send out a notice to everyone that the upgrade is complete and and give them the connection details. You need to remember that at this stage we have 2008 project upgraded to run under TFS 2010 but it is still running under that same process template that it was running before. You can only “enable” 2010 features in a process template you can’t upgrade. So what to do? Well, you need to create a new project and migrate things you want to keep across.</p>\n    <p>Souse code is easy, you can move or Branch, but Work Items are more difficult as you can’t move them between projects. This instance is complicated more as the old project uses the Conchango/EMC Scrum for Team System template and I will need to write a script/application to get the work items across with their attachments in tact.</p>\n    <p>That is my next task!</p>\n\n</li></ul><div style=\"padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px\" class=\"wlWriterEditableSmartContent\">Technorati Tags: <a href=\"http://technorati.com/tags/TFS+2010\" rel=\"tag\">TFS 2010</a>\_<a href=\"http://technorati.com/tags/TFS+2008\" rel=\"tag\">TFS 2008</a>\_<a href=\"http://technorati.com/tags/ALM\" rel=\"tag\">ALM</a>\_<a href=\"http://technorati.com/tags/SSW\" rel=\"tag\">SSW</a>\_<a href=\"http://technorati.com/tags/Scrum\" rel=\"tag\">Scrum</a>\_<a href=\"http://technorati.com/tags/VS+2010\" rel=\"tag\">VS 2010</a>\_<a href=\"http://technorati.com/tags/VS+2008\" rel=\"tag\">VS 2008</a>\_<a href=\"http://technorati.com/tags/SP+2010\" rel=\"tag\">SP 2010</a>\_<a href=\"http://technorati.com/tags/TFS\" rel=\"tag\">TFS</a>\_<a href=\"http://technorati.com/tags/SharePoint\" rel=\"tag\">SharePoint</a>\_<a href=\"http://technorati.com/tags/TFS+2005\" rel=\"tag\">TFS 2005</a>\_<a href=\"http://technorati.com/tags/VS+2005\" rel=\"tag\">VS 2005</a>\_</div>"
  - ''
  post_id: '45'
  post_date: '2010-05-03 13:04:01'
  post_date_gmt: '2010-05-03 13:04:01'
  post_modified: '2010-05-03 13:04:01'
  post_modified_gmt: '2010-05-03 13:04:01'
  comment_status: open
  ping_status: open
  post_name: upgrading-team-foundation-server-2008-to-2010
  status: publish
  post_parent: '0'
  menu_order: '0'
  post_type: post
  post_password: ''
  is_sticky: '0'
  category: {}
  postmeta:
  - meta_key: authorsure_include_css
    meta_value: ''
  - meta_key: dsq_thread_id
    meta_value: '311247343'
  - meta_key: _flattr_post_language
    meta_value: ''
  - meta_key: _flattr_post_category
    meta_value: ''
  - meta_key: _flattr_post_hidden
    meta_value: ''
  - meta_key: _flattr_btn_disabled
    meta_value: ''
  - meta_key: _thumbnail_id
    meta_value: '8622'
  - meta_key: _wpbitly
    meta_value: http://nkdalm.net/1b3lXCa
  - meta_key: _pl_karma
    meta_value: '0'
  - meta_key: _jetpack_related_posts_cache
    meta_value: >-
      a:1:{s:32:"8f6677c9d6b0f903e98ad32ec61f8deb";a:2:{s:7:"expires";i:1474513458;s:7:"payload";a:3:{i:0;a:1:{s:2:"id";i:7149;}i:1;a:1:{s:2:"id";i:53;}i:2;a:1:{s:2:"id";i:6905;}}}}
  - meta_key: _wpghs_github_path
    meta_value: _posts/2010-05-03-upgrading-team-foundation-server-2008-to-2010.md
  - meta_key: _sha
    meta_value: ''
  - meta_key: _wpml_media_has_media
    meta_value: '1'
  - meta_key: _tribe_ticket_capacity
    meta_value: '0'
  - meta_key: _tribe_ticket_version
    meta_value: 4.12.1.2
  - meta_key: ekit_post_views_count
    meta_value: '1148'
  comment:
  - comment_id: '769'
    comment_author: John Liu
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2010-05-03 20:09:46'
    comment_date_gmt: '2010-05-03 20:09:46'
    comment_content: >-
      To my credit I got "everyone" to check in before 6pm!  It's just the last
      account still had over 200 "add" from a recent botched branching that I
      was "just" about to undo...<br /><br />:p
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969627'
  - comment_id: '770'
    comment_author: Sam Abraham
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2010-05-03 21:57:16'
    comment_date_gmt: '2010-05-03 21:57:16'
    comment_content: >-
      Hello,<br />Do you think it is possible for a VS2010 TFS client to connect
      to a 2008 TFS server?<br />I am looking into upgrading to VS2010 all while
      keeping the 2008 TFS Server.<br /><br />Thanks<br />--Sam
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969629'
  - comment_id: '771'
    comment_author: Allan
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2010-05-03 22:28:11'
    comment_date_gmt: '2010-05-03 22:28:11'
    comment_content: >-
      That's a good guide for TFS upgrading. I'm still interested in how do you
      remove the old template from the new server? For example, in TFS 2008, we
      made some new template, but now how do you remove them from the new box?
      it has already changed the database.
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969632'
  - comment_id: '772'
    comment_author: John Liu
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2010-05-04 08:46:58'
    comment_date_gmt: '2010-05-04 08:46:58'
    comment_content: >-
      Hey where are my code history, I can't do blame anymore - I mean...
      annotate.
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969633'
  - comment_id: '773'
    comment_author: Helgi
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2010-05-12 22:19:40'
    comment_date_gmt: '2010-05-12 22:19:40'
    comment_content: >-
      Thanks for a great guide. I just finished doing this and only ran into one
      problem: The import finished with two warnings saying 0 steps completed
      out of 208. As it turned out my new single-server TFS2010 was SQL Server
      2008 R2 x64 as NT AUTHORITYNETWORK SERVICE and that account didn't have
      access to the imported TfsIntegration database. The solution: I added NT
      AUTHORITYNETWORK SERVICE temporarily to the sysadmin role in SQL Server
      and the import worked right away.
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969635'
  - comment_id: '774'
    comment_author: Stu
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2010-05-27 01:33:15'
    comment_date_gmt: '2010-05-27 01:33:15'
    comment_content: >-
      Hello and thanks for the guide.  We're about to do the very same thing,
      we're going from 2008 using Conchango to 2010 using MSF for Agile.  One
      requirement is not losing the bug history.  Did you do anything preserve
      that history?  Also, We're running MSSQL 2005 on our 2008 system, any idea
      what the implications of that may be?<br /><br />Thanks again, this is
      very helpful.<br /><br />Stu
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969639'
  - comment_id: '775'
    comment_author: Carrie
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2010-07-15 21:55:11'
    comment_date_gmt: '2010-07-15 21:55:11'
    comment_content: >-
      In a way, this is nighly relevant to what se see in the world today. There
      is also more to be seen.
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969640'
  - comment_id: '776'
    comment_author: tiirp
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2010-09-30 21:54:58'
    comment_date_gmt: '2010-09-30 21:54:58'
    comment_content: >-
      What about the TFS sites in WSS3? How its possible to move them to new
      server?
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969643'
  - comment_id: '777'
    comment_author: onemenny
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2010-10-06 17:41:54'
    comment_date_gmt: '2010-10-06 17:41:54'
    comment_content: >-
      This is a very informative post. i followed all the steps and every thing
      worked great. <br /><br />one thing: i had to delete the TfsWarehouse
      database manually since it remained after the merge.<br />
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969646'
  - comment_id: '778'
    comment_author: bacon
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2010-10-12 21:35:16'
    comment_date_gmt: '2010-10-12 21:35:16'
    comment_content: >-
      Great post - thank you.<br /><br />One question... in a scenario where
      server1 is my TFS2008/sql2005 server and server2 is my TFS2010/SQL2008
      server I run tfsconfig and import server2 after restoring the databases on
      it, right?<br /><br />TfsConfig import /sqlinstance:server2
      /collectionName:mycollection /confirmed
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969650'
  - comment_id: '779'
    comment_author: Valery
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2010-10-26 22:26:25'
    comment_date_gmt: '2010-10-26 22:26:25'
    comment_content: >-
      Could be a good idea to also explain how to restart an import if this one
      failed. <br /><br />Ex.: I experienced an issue during my tests. The
      import stopped at step 95 of 2008 with the following status : The Upgrade
      operation on the ApplicationTier feature has completed. There were 0
      errors and 2 warnings.<br /><br />Actually, looking in the log file, I
      found an error (So the status reported by TFSConfig /import was not
      corret). The error was a "TF30042: The database is full. Contact your Team
      Foundation Server administrator.". <br /><br />It seems that the log file
      was short on space... (I still have to check with the DataManagement team
      how they want to solve this on the future production servers)<br /><br
      />But to redo the import on my test server, I had to delete the newly
      created collection with the command:<br />c:Program FilesMicrosoft Team
      Foundation Server 2010Tools&gt;TFSConfig Collection /delete
      /collectionName:"MyTestImportCollection"<br /><br />Next, I had to delete
      all the TFS 2008's database previously restored and re-restore them. <br
      /><br />Finally to skip the log issue, I did execute an ALTER DATABASE
      [*for each tfs 2008 DB*] SET RECOVERY SIMPLE as suggested here
      http://coderjournal.com/2009/02/tf30042-the-database-is-full-contact-your-team-foundation-server-administrator/
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969652'
  - comment_id: '780'
    comment_author: Thanh-Nu Leroy
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2011-01-11 17:04:34'
    comment_date_gmt: '2011-01-11 17:04:34'
    comment_content: >-
      Hi Martin,<br />Thanks for this great post.  I have tried a upgrade using
      the upgrade wizard.  Everything works fine, but I have a little issue with
      tfs database naming convention.  I have a few questions related to SQL
      Databases after upgrading:<br />1.  Is there a way to rename the Tfs DBs
      ("tfs_Warehouse" and "tfs_Configuration")? Our SQL team has a naming
      convention for DBs, and the way TFS assigns name for TFS Dbs doesn't fit
      the required naming convention, even if I used the label to add a
      customized label to the DB names. Can I rename the TFS SQL Dbs, then edit
      the configuration information to change to the new names?<br />2.  As you
      plained the 6 main tfs Databases are merged into the single
      TfsVersionControl database, does this mean that after upgrading, you can
      rename the TfsVersionControl database and delete the 5 other tfs
      databases?<br />Thank you in advance for your help.<br />Thanh-Nu<br />
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969654'
  - comment_id: '781'
    comment_author: Tej Shah
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2011-01-29 15:31:09'
    comment_date_gmt: '2011-01-29 15:31:09'
    comment_content: >-
      After apply TfsConfig import command i got following result after 208
      steps<br /><br />Warnings: 1<br />Warning Message: [2011-01-28
      22:12:57Z][Warning] TF252011: SQL Server Reporting Services could not be
      upgraded. The upgrade failed with the following error: The permissions
      granted to user 'NT AUTHORITYNETWORK SERVICE' are insufficient for
      performing this operation..<br /><br />The Upgrade operation on the
      ApplicationTier feature has completed. There were 0<br /> errors and 1
      warnings.<br /><br />what can i do to upgrade only SQL Server Reporting
      Services upgrade. i really appricate for you help.<br /><br />Thanks
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969655'
  - comment_id: '782'
    comment_author: Barkingdog
    comment_author_email: ''
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2011-02-25 23:27:09'
    comment_date_gmt: '2011-02-25 23:27:09'
    comment_content: >-
      I'm confused about TFS GUIDs. I want our current TFS 2008 server to be up
      and running on the same network, at the same time, as our newly upgraded
      TFS 2010 server. The new TFS 2010 Server is on new hardware but is built
      from a restore of the databases on the currently running TFS 2008
      server.   Do I still need to change the TFS GUID on the TFS 2010 server?
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '209969659'
  - comment_id: '783'
    comment_author: Richard Winks
    comment_author_email: rpwinks@gmail.com
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2011-08-09 13:24:00'
    comment_date_gmt: '2011-08-09 13:24:00'
    comment_content: "For what it is worth. If you have applied the TFS 2010 SP1 Cumulative Update 1 that was available on June 13, 2011, the update step may fail as it did for me. The error in the TFSConfig log is displayed as \n[Error] HatterasCreateSchema.sql Line 13163 Error: The column \"WorkspaceId\" cannot be modified because it is either a computed column or is the result of a UNION operator. (100 of 216)Brian Harry's Blog announcement has a bunch of comments. The last that I see (Aug 8, 2011) indicates that an update will be available soon to address the problem.\nIn the meantime do not install the CU before attempting the update.\_ For what it's worth, I tried uninstalling the update and that failed. So I'm stuck waiting for the update to be updated."
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '281203142'
  - comment_id: '784'
    comment_author: Manish Jain
    comment_author_email: manishkj@gmail.com
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2011-09-16 00:47:00'
    comment_date_gmt: '2011-09-16 00:47:00'
    comment_content: 'Yes'
    comment_approved: '1'
    comment_type: comment
    comment_parent: '782'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: '209969659'
    - meta_key: dsq_post_id
      meta_value: '312244887'
  - comment_id: '785'
    comment_author: Manish Jain
    comment_author_email: manishkj@gmail.com
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2011-09-16 00:48:00'
    comment_date_gmt: '2011-09-16 00:48:00'
    comment_content: I used domain account tfsreports. Give it admin permissions to reporting.
    comment_approved: '1'
    comment_type: comment
    comment_parent: '781'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: '209969655'
    - meta_key: dsq_post_id
      meta_value: '312247298'
  - comment_id: '786'
    comment_author: Martin Hinshelwood
    comment_author_email: martin@hinshelwood.com
    comment_author_url: http://blog.hinshelwood.com
    comment_author_IP: ''
    comment_date: '2011-09-15 18:18:00'
    comment_date_gmt: '2011-09-16 01:18:00'
    comment_content: >-
      All of the Service Packs and Cumulative Updates are now available on
      Windows Update.
    comment_approved: '1'
    comment_type: comment
    comment_parent: '783'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: '281203142'
    - meta_key: dsq_post_id
      meta_value: '312291490'
  - comment_id: '787'
    comment_author: ''
    comment_author_email: nivatha.jagannathan@noser.com
    comment_author_url: ''
    comment_author_IP: ''
    comment_date: '2011-12-02 03:49:00'
    comment_date_gmt: '2011-12-02 11:49:00'
    comment_content: "Hello, appreciate a lot for the great post. I am newbie to TFS and did everything by self learning. I did a migration upgrade of TFS 2008 to TFS 2010. Its almost done. I have imported the TFS 2008 databases into TFS 2010 and I am able to connect to the old team project collection. Is there anything else that needs to be done after this? Will the build scripts of TFS 2008 wont\_work with TFS 2010? Is there any modification that\_needs to be done to the old build scripts\_to make it work with TFS 2010? Thanks in advance."
    comment_approved: '1'
    comment_type: comment
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: dsq_parent_post_id
      meta_value: ''
    - meta_key: dsq_post_id
      meta_value: '377439977'
  - comment_id: '788'
    comment_author: Upgrading from TFS 2008 to TFS 2010 Overview - Visual Studio ALM
    comment_author_email: ''
    comment_author_url: http://blog.hinshelwood.com/upgrading-from-tfs-2008-to-tfs-2010-overview/
    comment_author_IP: 96.126.104.162
    comment_date: '2012-09-21 23:24:26'
    comment_date_gmt: '2012-09-22 06:24:26'
    comment_content: >-
      [...] Upgrading Team Foundation Server 2008 to 2010This was an upgrade to
      TFS 2010 Beta 2 in the early days of 2010. I only had one problem even way
      back then. [...]
    comment_approved: '1'
    comment_type: pingback
    comment_parent: '0'
    comment_user_id: '0'
    commentmeta:
    - meta_key: akismet_result
      meta_value: 'false'
    - meta_key: akismet_history
      meta_value: >-
        a:4:{s:4:"time";s:13:"1348295066.82";s:7:"message";s:28:"Akismet cleared
        this comment";s:5:"event";s:9:"check-ham";s:4:"user";s:0:"";}
    - meta_key: akismet_history
      meta_value: >-
        a:4:{s:4:"time";s:13:"1348295229.94";s:7:"message";s:46:"MrHinsh changed
        the comment status to
        approved";s:5:"event";s:15:"status-approved";s:4:"user";s:7:"MrHinsh";}
