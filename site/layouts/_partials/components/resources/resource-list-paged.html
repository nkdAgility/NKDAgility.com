{{ $ResourceTypeFilter := .Params.ResourceType }}
{{ $resources := where .Site.RegularPages "Type" "resources" }}
{{ if ne $ResourceTypeFilter "signals" }}
  {{ $resources = where $resources "Params.ResourceType" "ne" "signals" }}
{{ end }}
{{ if $ResourceTypeFilter }}
  {{ $resources = where $resources "Params.ResourceType" $ResourceTypeFilter }}
{{ end }}

{{ $paginator := .Paginate $resources.ByDate.Reverse 50 }}
<div class="row g-4 ">
  {{ range $paginator.Pages }}
    <div class="col-12 col-md-6 col-lg-4">
      <div class="card h-100">
        <div class="card-body d-flex flex-column position-relative">
          <small class="text-muted mb-2"> {{ partial "components/resources/functions/get-first-classification.html" . }} â€¢ {{ .Date.Format "Jan 2, 2006" }}</small>
          <h5 class="card-title"><a href="{{ .Permalink }}" class="text-decoration-none text-reset">{{ .Title }}</a></h5>
          <p class="card-text flex-grow-1">{{ .Description | default .Summary  | truncate 150 }}</p>
          <div class="d-flex justify-content-between align-items-end mt-auto">
            <div class="resource-icon">
              {{- partial "components/resources/resource-icon.html" . }}
              {{- .Params.ResourceType | title }}
            </div>
            <a href="{{ .Permalink }}" class="text-decoration-none">Read More</a>
          </div>
        </div>
      </div>
    </div>
  {{ end }}
</div>

<div class="py-3">
  <nav aria-label="Page navigation">
    <ul class="pagination d-flex justify-content-center">
      {{ if $paginator.HasPrev }}
        <li class="page-item">
          <a class="page-link" href="{{ $paginator.Prev.URL }}#learnMore">Previous</a>
        </li>
      {{ end }}

      {{ range $paginator.Pagers }}
        <li class="page-item {{ if eq . $paginator }}active{{ end }}">
          <a class="page-link" href="{{ .URL }}#learnMore">{{ .PageNumber }}</a>
        </li>
      {{ end }}

      {{ if $paginator.HasNext }}
        <li class="page-item">
          <a class="page-link" href="{{ $paginator.Next.URL }}#learnMore">Next</a>
        </li>
      {{ end }}
    </ul>
  </nav>
</div>
