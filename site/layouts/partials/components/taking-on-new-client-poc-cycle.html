{{ if and (.Site.Params.TakingOnNewClients) (ne .RelPermalink "/company/book-online/") }}
  <!-- Link to Open Modal -->
  <div class="animated-text text-nowrap align-items-center">
    <span class="icon">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="icon" viewBox="0 0 512 512">
        <path
          d="M197.9 253.9c12.9 6.4 24.7 14.8 35 25.2s18.8 22.2 25.2 35c105.8-30 156.7-79.5 181.5-126c25-46.8 27.3-97.6 22-137.7c-40.1-5.3-90.9-3-137.7 22c-46.5 24.8-96 75.8-126 181.5zM384 312.1l0 82.2c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-114.7c0-22.6-9-44.3-25-60.3s-37.7-25-60.3-25L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.2 0C281.7-3.8 408.8-8.5 483.9 5.3c11.6 2.1 20.7 11.2 22.8 22.8c13.8 75.1 9.1 202.2-122.7 284zM28.3 511.9c-16 .4-28.6-12.2-28.2-28.2C1 446 7.7 379.7 42 345.5c34.4-34.4 90.1-34.4 124.5 0s34.4 90.1 0 124.5C132.3 504.3 66 511 28.3 511.9zm50.2-64.5c12.8-.7 31.2-3.7 41.3-13.7c11.4-11.4 11.4-30 0-41.4s-30-11.4-41.4 0c-10.1 10.1-13 28.5-13.7 41.3c-.5 8 5.9 14.3 13.9 13.9zM328 144a40 40 0 1 1 80 0 40 40 0 1 1 -80 0z" />
      </svg>
    </span>
    <span class="icon">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="icon" viewBox="0 0 256 512">
        <path d="M64 120c0-48.6 39.4-88 88-88l48 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-48 0c-22.1 0-40 17.9-40 40l0 45.5c0 23.3-9.3 45.7-25.8 62.2L57.9 256l28.3 28.3c16.5 16.5 25.8 38.9 25.8 62.2l0 45.5c0 22.1 17.9 40 40 40l48 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-48 0c-48.6 0-88-39.4-88-88l0-45.5c0-10.6-4.2-20.8-11.7-28.3L7 273c-9.4-9.4-9.4-24.6 0-33.9l45.3-45.3c7.5-7.5 11.7-17.7 11.7-28.3L64 120z" />
      </svg>
    </span>
    <span class="text text-nowrap">
      <a href="#" class="d-none matrixAnimation" data-bs-toggle="modal" data-bs-target="#newClientsModal" title="We're looking for 1 new client!">Accepting 1 new client!</a>
    </span>
    <span class="icon">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="icon" viewBox="0 0 256 512">
        <path d="M192 120c0-48.6-39.4-88-88-88L56 32C42.7 32 32 42.7 32 56s10.7 24 24 24l48 0c22.1 0 40 17.9 40 40l0 45.5c0 23.3 9.3 45.7 25.8 62.2L198.1 256l-28.3 28.3c-16.5 16.5-25.8 38.9-25.8 62.2l0 45.5c0 22.1-17.9 40-40 40l-48 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l48 0c48.6 0 88-39.4 88-88l0-45.5c0-10.6 4.2-20.8 11.7-28.3L249 273c9.4-9.4 9.4-24.6 0-33.9l-45.3-45.3c-7.5-7.5-11.7-17.7-11.7-28.3l0-45.5z" />
      </svg>
    </span>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="newClientsModal" tabindex="-1" aria-labelledby="newClientsModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="newClientsModalLabel">We're looking for 1 new client!</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-start text-small">
          <p class="text-small">To maintain quality and focus, <strong>we limit concurrent engagements</strong> and never overbook. When we work with you, our attention is fully on your needs. Whether you need a short-term boost or a long-term strategic partnership, we tailor our approach to deliver real value.</p>
          <p class="text-small">Check out what <a href="/company/working-with-us/">Working with Us</a> looks like.</p>
          <p class="text-small">We operate on a fixed-price model, eliminating the need for time tracking or approval gates. Our engagements are based on a defined time period, ensuring full flexibility to collaborate on any topic within our expertise—technical, process-related, or strategic.</p>
          <p class="text-small"><a href="/company/book-online/">Get in touch today</a> to discuss how we can support your organisation’s agility, DevOps adoption, and value delivery.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary btn-sm text-small" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <style>
    .animated-text {
      display: flex;
      align-items: center; /* Ensures all elements are vertically aligned */
      gap: 0.3rem; /* Adds a small spacing between elements */
    }

    .animated-text .icon {
      display: flex;
      align-items: center; /* Aligns icons to the center */
    }

    .animated-text .text a {
      display: inline-block;
      white-space: nowrap;
    }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const elements = document.querySelectorAll(".matrixAnimation"); // Select all elements with class matrixAnimation
      const cycleLimit = 1; // Number of letters to cycle through ASCII before just adding normally

      elements.forEach((textElement) => {
        const targetText = textElement.innerHTML;
        textElement.innerHTML = ""; // Clear text to start animation

        function animateLetter(position) {
          if (position >= targetText.length) return;

          const targetChar = targetText[position];

          // If within cycleLimit, cycle through ASCII characters
          if (position < cycleLimit) {
            let currentChar = 33; // Start from '!' in ASCII
            const interval = setInterval(() => {
              textElement.innerHTML = targetText.substring(0, position) + String.fromCharCode(currentChar);
              textElement.classList.remove("d-none");
              currentChar++;

              if (currentChar > targetChar.charCodeAt(0)) {
                clearInterval(interval);
                textElement.innerHTML = targetText.substring(0, position + 1);
                setTimeout(() => animateLetter(position + 1), 50);
              }
            }, 30);
          } else {
            // If past cycleLimit, just add the letters one by one with a delay
            textElement.innerHTML = targetText.substring(0, position + 1);
            setTimeout(() => animateLetter(position + 1), 50);
          }
        }

        setTimeout(() => animateLetter(0), 1000);
      });
    });
  </script>
{{ end }}
